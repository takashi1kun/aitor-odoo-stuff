<?xml version="1.0" encoding="utf-8"?>
<!--
# (c) 2019, 2021 Praxya - Aitor Rosell Torralba <arosell@praxya.es>
# License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-->
<odoo>
    <data>




        <!--><FORMS><-->
 <record id="sale_order_service_generator_line_form" model="ir.ui.view">
            <field name="name">sale.order.service.generator.line.form</field>
            <field name="model">sale.order.service.generator.line</field>
            <field name="arch" type="xml">
                <form string="Sales Order Generator Line" class="o_sale_order">
                    <sheet>
                        <field name="possible_product_ids" invisible="1" />
                        <field name="name" invisible="1" />
                        <field name="generator_id" invisible="1" />
                        <field name="uom_id" invisible="1" />
                        <field name="currency_id" invisible="1" />
                        <field name="company_id" invisible="1" />
                        <field name="user_id" invisible="1" />
                        <field name="creation_date" invisible="1" />
                        <field name="block_product" invisible="1" />
                        <field name="product_type" invisible="1" />
                        <group>
                            <group>
                                <field name="line_type" readonly="1" />
                                <field name="product_id" attrs="{'readonly':[('block_product', '=', True)]}" options="{'no_create': True, 'no_create_edit':True}" domain="[('id', 'in', possible_product_ids.ids)]" />
                            </group>
                            <group>
                                <field string="Cantidad" name="product_qty" />
                                <field name="unit_price" string="Precio Unidad" />
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
 </record>
        <record id="sale_order_service_generator_form" model="ir.ui.view">
            <field name="name">sale.order.service.generator.form</field>
            <field name="model">sale.order.service.generator</field>
            <field name="arch" type="xml">
                <form string="Sales Order" class="o_sale_order ">
                        <field name="half_done" invisible="1" />
                    <field name="is_favorite" invisible="1"/>
                    <header>
                        <button name="action_generate" string="Generar" type="object" states="draft" class="btn-primary"
                          attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                        <button name="mark_for_generation_later" string="Generar(luego)" type="object" class="btn-primary"
                          attrs="{'invisible': ['|',('state', '!=', 'draft'),'|',('marked_for_generation', '=', True),('marked_for_double_generation', '=', True)]}"/>
                        <button name="mark_for_generation_later"  string="Confirmar(luego)" type="object" class="btn-primary"
                          attrs="{'invisible': ['|',('state', '!=', 'generado'),('marked_for_generation', '=', True)]}"/>
                        <button name="mark_for_generation_double_later" string="Generar y Confirmar(luego)" type="object" class="btn-primary"
                          attrs="{'invisible': ['|',('state', '!=', 'draft'),'|',('marked_for_generation', '=', True),('marked_for_double_generation', '=', True)]}"/>
                        <button name="action_cancel" states="draft,generado,confirmado" type="object" string="Cancelar"
                          attrs="{'invisible': [('state', 'not in', ['draft','generado','confirmado'])]}"/>
                        <button name="action_confirm" states="generado" type="object" string="Confirmar"
                          attrs="{'invisible': [('state', '!=', 'generado')]}"
                        />
                        <button name="action_draft"
                                attrs="{'invisible': ['|',('half_done', '=', True),('state', '!=', 'cancelado')]}"
                                states="cancelado" type="object" string="Re-abrir"/>
                        <button name="action_delete"
                                attrs="{'invisible': ['|',('half_done', '=', True),('state', '!=', 'cancelado')]}"
                                states="cancelado" type="object" string="Eliminar"/>
                        <button name="action_driver_wizard" states="confirmado"
                          attrs="{'invisible': [('state', '!=', 'confirmado')]}" type="object" string="Asignar Conductor"/>
                        <button name="action_helper_wizard" states="confirmado"
                          attrs="{'invisible': ['|',('state', '!=', 'confirmado'), ('has_internal_helper', '=', False)]}" type="object" string="Asignar Ayudante"/>
                        <button name="transform_everything" groups="base.group_no_one" type="object" string="transformar base datos"
                        help="
                        Solo visible para administrador, este boton lo que hace es parametrizar la base de datos, por ejemplo,
                        busca todos los productos con FIJO en el nombre y les parametriza el
                        campo tipo de servicio a FIJO, tambien les copia las rutas de el producto 'kilometros
                        hora por defecto' que se haya parametrizado en configuracion, asi mismo tambien actualiza en las compras el estado de
                        asignacion del conductor si algo pasa y no lo hace automaticamente"
                        />
                         <button name="recalculate_providers_price"  groups="base.group_no_one" type="object" string="Recalcular Precios Proveedores"
                        help="Recalcula todos los precios de los proveedores de los productors de tipo ya, fijo y planificado para que coencidan con los puestos en la pestaña general"
                        />
                        <button name="create_provider_lines"  groups="base.group_no_one" type="object" string="Generar Proveedores desde conductores"
                        help="Genera en cada producto de tipo ya, fijo y planificado una linea de proveedor por cada uno de los conductores y les asigna el precio de coste del producto, asi como la cantidad minima del producto, asi mismo, a los ya existentes les arregla el precio y la cantidad minima"
                        />
                        <button name="autofill_ya_by_category"  groups="base.group_no_one" type="object" string="Asignar productos ya por categoria"
                        help="Asigna los equivalentes YA hr y YA km a los productos de tipo ya, fijo y planificado, segun sus categorias"
                        />
                        <field name="state" widget="statusbar" statusbar_visible="draft,generado,confirmado,completado,eliminado"/>
                    </header>
                    <sheet>
                                <field name="has_internal_helper" invisible="1"/>

                                <field name="could_be_renewed" invisible="1"/>
                                <field name="half_done" invisible="1"/>
                                <field name="days_till_renovation" invisible="1"/>
                                <field name="marked_for_generation" invisible="1"/>
                                <field name="marked_for_double_generation" invisible="1"/>
                         <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button"
                                    name="button_sales"
                                    type="object"
                                    groups="account.group_account_user"
                                    attrs="{'invisible':[('linked_sale_orders','=',[])]}"
                                    icon="fa-list-alt">
                                <field string="Ventas Generadas"
                                       name="linked_sale_orders_count"
                                       widget="statinfo"/>
                            </button>
                            <button class="oe_stat_button"
                                    name="button_purchases"
                                    type="object"
                                    attrs="{'invisible':[('linked_purchase_orders','=',[])]}"
                                    icon="fa-shopping-bag">
                                <field string="Compras Generadas"
                                       name="linked_purchase_orders_count"
                                       widget="statinfo"/>
                            </button>
                            <button class="oe_stat_button"
                                    name="button_pickings"
                                    type="object"
                                    attrs="{'invisible':[('linked_stock_pickings','=',[])]}"
                                    icon="fa-truck">
                                <field string="Albaranes Generados"
                                       name="linked_stock_pickings_count"
                                       widget="statinfo"/>
                            </button>
                             <button class="oe_stat_button"
                                    name="renew"
                                    type="object"
                                    attrs="{'invisible':[('could_be_renewed','=',False)]}"
                                    icon="fa-refresh">

                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_value">
                                        <field name="days_till_renovation" widget="statinfo"
                                               nolabel="1"/> Dias Restantes
                                    </span>
                                    <span class="o_stat_text">Renovar</span>
                                </div>
                            </button>
                        </div>
                        <div class="oe_title">
                        <h1 class="o_row">
                            <field name="priority" widget="priority"/>
                            <field name="name" readonly="1"/>
                        </h1>
                        </div>
                        <group>
                            <group>
                                <group col="2" colspan="2">
                                <field required="True" attrs="{'readonly':[('state','!=','draft')]}" name="service"/>
                                <field attrs="{
                                'required':[('service','=','fijo')],
                                'invisible':[('service','!=','fijo')],
                                'readonly':[('state','!=','draft')]
                                }"
                                       name="fixed_months"/>
                                <field autocomplete="off" required="True" attrs="{'readonly':[('state','!=','draft')]}"
                                       name="fixed_starting"/>
                                <field autocomplete="off" attrs="{
                                'required':[('service','=','planificado')],
                                'invisible':[('service','not in',['planificado', 'ya'])],
                                'readonly':[('state','!=','draft')]
                                }"
                                           name="planed_finish"/>
                                    <field name="completition" string="% Completados"  readonly="1" attrs="{'invisible':[('state','not in',('confirmado', 'completado'))]}" widget="progressbar"/>
                                </group>
                                <group col="2" colspan="2" string="Festividad Gratuita En">
                                <field  attrs="{'readonly':[('state','!=','draft')]}" string="Nocturnidad" name="free_night_hours"/>
                                    <field name="disable_festive_saturday"  attrs="{'readonly':[('state','!=','draft')]}" string="Sabados"/>
                                    <field name="disable_festive_sunday"  attrs="{'readonly':[('state','!=','draft')]}" string="Domingos"/>
                                    <field name="disable_festive_calendar"  attrs="{'readonly':[('state','!=','draft')]}" string="Dias Festivos" help="Con dias festivos se refiere a los dias marcados en el calendario de festividades en odoo"/>
                                </group>

                            </group>
                            <group>
                                <group col="2" colspan="2">
                                <field name="producto" invisible="1" domain="[('service_type_praxya','=', service)]" attrs="{'readonly':[('state','!=','draft')]}"/>
                                <field name="cliente" required="True"  attrs="{'readonly':[('state','!=','draft')]}" domain="[
                                    ('customer', '=', True),
                                    ('parent_id', '=', False)
                                ]" />
                              <!--  <field name="horas" attrs="{
                                'invisible':[('tipo_producto','in',['km',False])],
                                'required':[('tipo_producto','not in',['km',False])],
                                'readonly':[('tipo_producto','=','jornada')
                                ]}" widget="float_time"/>
                                <field string="Kilometros" name="horas" attrs="{
                                'required':[('tipo_producto','=','km')],
                                'invisible':[('tipo_producto','!=','km')]
                                }"/> -->
                                <field invisible="1"  name="horas" />
                                <field invisible="1" name="dias_calculados"/>
                                <field invisible="1" name="tipo_producto"/>
                                <field  attrs="{'readonly':[('state','!=','draft')]}" widget="float_time" name="start_hour"/>
                                <field  attrs="{'readonly':[('state','!=','draft')]}" widget="float_time" name="finish_hour"/></group>
                                <group string="‎" col="2" colspan="2">
                                <field attrs="{'readonly':[('state','!=','draft')]}" name="tipo_tiempo_espera" required="1"/>
                                <field  attrs="{'readonly':[('state','!=','draft')]}" name="puede_haber_peajes"/>
                                <label
                                       for="fixed_todos"
                                       string="Dias de la semana"/>
                                <div
                                     class="address_format">
                                    <table id="daysOfWeek">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <label for="fixed_lunes" string="L"/>
                                                </th>
                                                <th>
                                                    <label for="fixed_martes" string="M"/>
                                                </th>
                                                <th>
                                                    <label for="fixed_miercoles" string="X"/>
                                                </th>
                                                <th>
                                                    <label for="fixed_jueves" string="J"/>
                                                </th>
                                                <th>
                                                    <label for="fixed_viernes" string="V"/>
                                                </th>
                                                <th>
                                                    <label for="fixed_sabado" string="S"/>
                                                </th>
                                                <th>
                                                    <label for="fixed_domingo" string="D"/>
                                                </th>
                                                <th>
                                                    <div style="height: 1em;width: 1em;position: relative;">
                                                        <i class="fa fa-check-square"
                                                           style="position: absolute;top: 3px;left: 3px;/* background-color: white; */z-index: 11;">

                                                        </i>
                                                        <i class="fa fa-square fa-inverse"
                                                           style="position: absolute;top: 2px;left: 2px;z-index: 2;">
                                                        </i>
                                                        <i class="fa fa-square"
                                                           style="position: absolute;top: 0px;left: 0px;">
                                                        </i>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           widget="boolean_switch"
                                                           name="fixed_lunes" class="oe_inline"/>
                                                </td>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           name="fixed_martes"
                                                           class="oe_inline"/>
                                                </td>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           name="fixed_miercoles"
                                                           class="oe_inline"/>
                                                </td>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           name="fixed_jueves"
                                                           class="oe_inline"/>
                                                </td>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           name="fixed_viernes"
                                                           class="oe_inline"/>
                                                </td>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           name="fixed_sabado"
                                                           class="oe_inline"/>
                                                </td>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           name="fixed_domingo"
                                                           class="oe_inline"/>
                                                </td>
                                                <td>
                                                    <field attrs="{'readonly':[('state','!=','draft')]}"
                                                           name="fixed_todos" class="oe_inline"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                    </group>
                            </group>
                        </group>
                        <notebook>
                            <page string="Lineas">
                                <field name="line_button_available" invisible="1" />
                                 <button name="action_create_main_line" class="btn-xs btn-primary oe_edit_only" type="object" string="Crear Linea Servicio Principal"
                                  attrs="{'invisible': ['|',('line_button_available', '!=', 'primary'),('state','!=','draft')]}"
                                />
                                 <button name="action_create_secondary_line" class="btn-xs btn-primary oe_edit_only" type="object" string="Crear Linea Servicio Secundario"
                                  attrs="{'invisible': ['|',('line_button_available', '!=', 'secondary/other'),('state','!=','draft')]}"
                                />
                                 <button name="action_create_helper_line" class="btn-xs btn-primary oe_edit_only" type="object" string="Crear Linea Ayudante"
                                  attrs="{'invisible': ['|',('line_button_available', '!=', 'secondary/other'),('state','!=','draft')]}"
                                />
                                 <button name="action_create_misc_line" class="btn-xs btn-secondary oe_edit_only" type="object" string="Crear Linea Libre"
                                  attrs="{'invisible': ['|',('line_button_available', '!=', 'secondary/other'),('state','!=','draft')]}"
                                />
                                <field attrs="{'readonly':[('state','!=','draft')]}" name="line_ids" nolabel="1" widget="one2many"
                           options="{'reload_on_button': true}">
                                    <tree editable="bottom" string="lineas" create="false" delete="false">
                                        <field name="possible_product_ids" invisible="1" />
                                        <field name="order_number" invisible="1"/>
                                        <field name="name" invisible="1" />
                                        <field name="generator_id" invisible="1" />
                                        <field name="uom_id" invisible="1" />
                                        <field name="currency_id" invisible="1" />
                                        <field name="company_id" invisible="1" />
                                        <field name="user_id" invisible="1" />
                                        <field name="creation_date" invisible="1" />
                                        <field name="block_product" invisible="1" />
                                        <field name="product_type" invisible="1" />
                                        <field name="can_be_deleted" invisible="1" />

                                        <field name="line_type" readonly="1" />
                                        <field force_save="1" name="product_id" required="1"
                                               attrs="{'readonly':[('block_product', '=', True)]}"
                                               options="{'no_create': True, 'no_create_edit':True}"
                                               domain="[('id', 'in', possible_product_ids)]" />
                                        <field force_save="1" name="unit_price" required="1" string="Precio Unidad" />
                                        <field force_save="1" string="Cantidad" name="product_qty" />
                                        <button name="action_delete_line" attrs="{
                                        'invisible':[('can_be_deleted', '!=', True)],
                                        'disabled':[('can_be_deleted', '!=', True)]
                                        }" type="object" icon="fa-trash" class="o_icon_button oe_edit_only" />
                                    </tree>
                                </field>
                            </page>
                            <page string="Operaciones">
                                <field name="operation_ids" context="{'default_parent_partner_id':cliente}" nolabel="1" widget="one2many">
                                    <tree editable="bottom">
                                            <field name="parent_partner_id" invisible="1"/>
                                        <field name="action"/>
                                        <field name="dir" context="{
                                            'default_type':'delivery',
                                            'default_parent_id':parent_partner_id,
                                            'form_view_ref': 'sale_order_operations.create_and_edit_direction_res_partner_form',
                                            'show_address_only': 1,
                                            'create_address': 1
                                        }" />
                                        <field name="fecha"/>
                                        <field name="hora" widget="float_time"/>
                                        <field name="n_bultos"/>
                                        <field name="persona_contacto"/>
                                        <field name="telf"/>
                                        <field name="ref"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Ordenes de Venta">
                                <field readonly="1" nolabel="1"  name="linked_sale_orders"
                           options="{'reload_on_button': true}">
                                    <tree>
                                        <field name="unique_reference_code" readonly="1"/>
                                        <field name="name"/>
                                        <field name="date_order" string="Fecha de Pedido" widget="date"/>
                                        <field name="user_id" string="Comercial"/>
                                        <field name="PO_id" invisible="1" />
                                        <field name="driver" string="Conductor" attrs="{'invisible':[('state', 'in',('draft','generado'))]}"/>
                                        <field name="amount_total"/>
                                        <field name="driver_state" string="¿C. Asignado?" readonly="1" />
                                        <field name="state"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Ordenes de Compra">
                                <field readonly="1" nolabel="1" name="linked_purchase_orders"
                           options="{'reload_on_button': true}">
                                    <tree>
                                        <field name="unique_reference_code" readonly="1"/>
                                        <field name="name"/>
                                        <field name="SO_id" invisible="1"/>
                                        <field name="SO_ids" invisible="1"/>
                                        <field name="has_driver" invisible="1"/>
                                        <field name="date_order" string="Fecha de Pedido"/>
                                        <field string="Conductor" name="partner_id"/>
                                        <field name="amount_total"/>
                                        <field name="driver_state" string="¿C. Asignado?"/>
                                        <field name="state"  string="Compra" />
                                        <field name="invoice_status" string="Facturacion" />
                                    </tree>
                                </field>
                            </page>
                            <page string="Albaranes">
                                <field readonly="1" nolabel="1" name="linked_stock_pickings"
                           options="{'reload_on_button': true}">
                                    <tree>
                                        <field name="unique_reference_code" readonly="1"/>
                                        <field name="partner_id" string="Conductor" />
                                        <field name="scheduled_date" string="Fecha Prevista"/>
                                        <field name="state"/>
                                        <field name="origin"/>
                                        <field name="source_service"/>
                                        <field name="driver_state" string="¿C. Asignado?"/>
                                    </tree>
                                </field>
                            </page>

                            <page string="Nota">
                                <field name="note" nolabel="1" widget="html" />
                    <div class="oe_clear"/>
                            </page>
                            <page string="Metadatos">
                                  <group>
                                <field readonly="1" name="company_id"/>
                                <field readonly="1" name="user_id"/>
                                <field readonly="1" name="creation_date"/>
                                <field readonly="1" name="last_update_date"/>
                                <field readonly="1" name="generation_date"/>
                                <field readonly="1" name="confirmation_date"/>
                                <field readonly="1" name="cancelation_date"/>
                                  </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <!--></FORMS><-->




        <!--><TREES><-->

         <record id="sale_order_service_generator_tree" model="ir.ui.view">
            <field name="name">sale.order.service.generator.tree</field>
            <field name="model">sale.order.service.generator</field>
            <field name="arch" type="xml">
                <tree string="generator" class="o_sale_order anonbussiness_progress"
                      decoration-bf="state=='generado'"
                      decoration-muted="state=='cancelado'"
                      decoration-danger="could_be_renewed==True"
                      decoration-success="state=='confirmado'"
                >
                        <field name="half_done" invisible="1" />

                    <field name="could_be_renewed" invisible="1" />
                    <field name="is_favorite" invisible="1"/>
                    <field name="priority" widget="priority"/>
                    <field name="name"/>
                    <field name="service"/>
                    <field invisible="1" name="producto"/>
                    <field name="cliente"/>
                    <field invisible="1" name="horas" widget="float_time"/>
                    <field name="fixed_months"/>
                    <field name="fixed_starting"/>
                    <field name="planed_finish"/>
                    <field name="dias_calculados"/>
                    <field name="days_till_renovation" string="Dias Restantes" />
                    <field name="completition" string="% Completados" widget="progressbar"/>
                    <field name="state"/>
                    <field readonly="1" invisible="1" name="company_id"/>
                    <field readonly="1" name="user_id"/>
                    <field readonly="1" name="creation_date"/>
                    <field readonly="1" name="last_update_date"/>
                    <field readonly="1" invisible="1"  name="generation_date"/>
                    <field readonly="1" invisible="1"  name="confirmation_date"/>
                    <field readonly="1" invisible="1"  name="cancelation_date"/>
                </tree>
            </field>
        </record>

        <!--></TREES><-->



        <!--><FILTERS><-->

        <record id="view_service_generator_filter_driver" model="ir.ui.view">
            <field name="name">service.generator.list.filter</field>
            <field name="model">sale.order.service.generator</field>
            <field name="arch" type="xml">
                <search string="Buscar Generatrizes">
                    <field name="name" string="Referencia"/>
                    <field name="producto" string="Producto"/>
                    <field name="service" string="Tipo Servicio"/>
                    <field name="cliente" string="Cliente"/>
                    <field name="horas" string="Horas Contratadas"/>
                    <field name="fixed_months" string="Meses Contratados"/>
                    <field name="fixed_starting" string="Fecha de Inicio"/>
                    <field name="planed_finish" string="Fecha de Fin"/>
                    <field name="state" string="Estado"/>
                    <field name="user_id" string="Usuario"/>
                    <field name="is_favorite" string="¿Favorito?"/>
                    <field name="completition" filter_domain="['&amp;'('completition','=',self),('state','in',('confirmado', 'completado'))]" string="% Completados igual a"/>
                    <field name="completition" filter_domain="['&amp;',('completition','&gt;=',self),('state','in',('confirmado', 'completado'))]" string="% Completados mayor que"/>
                    <field name="completition" filter_domain="['&amp;',('completition','&lt;=',self),('state','in',('confirmado', 'completado'))]" string="% Completados menor que"/>

                    <filter string="Para Renovar" domain="[('could_be_renewed','=',True)]" name="view_renew"/>
                    <separator/>
                    <filter string="Mis Servicios" domain="[('user_id','=',uid)]" name="view_own"/>
                    <separator/>
                    <filter string="Favoritos" domain="[('is_favorite','=',True)]" name="view_favorites"/>
                    <filter string="Mis Favoritos" domain="[('is_favorite','=',True),('user_id','=',uid)]" name="view_my_favorites"/>
                    <separator/>
                    <filter string="Ver Ya" domain="[('service','=','ya')]" name="view_ya"/>
                    <filter string="Ver planificadas" domain="[('service','=','planificado')]" name="view_planned"/>
                    <filter string="Ver fijas" domain="[('service','=','fijo')]" name="view_fixed"/>
                    <separator/>
                    <filter string="Ver Borradores" domain="[('state','=','draft')]" name="view_drafts"/>
                    <filter string="Ver Generadas" domain="[('state','=','generado')]" name="view_generated"/>
                    <filter string="Ver Confirmadas" domain="[('state','=','confirmado')]" name="view_confirmed"/>
                    <filter string="Ver Completadas" domain="[('state','=','completado')]" name="view_completed"/>
                    <filter string="Ver Canceladas" domain="[('state','=','cancelado')]" name="view_canceled"/>
                    <separator/>
                    <filter string="Ocultar Canceladas" domain="[('state','!=','cancelado')]" name="view_non_canceled"/>
                    <separator/>
                    <filter string="Ocultar Borradores" domain="[('state','!=','draft')]" name="view_non_draft"/>
                    <separator/>

                    <group expand="0" string="Group By">
                        <filter string="Tipo" context="{'group_by': 'service'}"/>
                        <filter string="Producto" context="{'group_by':'producto'}"/>
                        <filter string="Cliente" context="{'group_by':'cliente'}"/>
                        <filter string="Estado" context="{'group_by':'state'}"/>
                        <filter string="Usuario" context="{'group_by':'user_id'}"/>
                        <filter string="Tipo de Producto" context="{'group_by':'tipo_producto'}"/>
                        <filter string="Favoritos" context="{'group_by':'is_favorite'}"/>
                    </group>

                </search>
            </field>
        </record>

        <!--></FILTERS><-->



        <!--><OTHER><-->

        <record id="sale_order_service_generator_kanban" model="ir.ui.view">
            <field name="name">sale.order.service.generator.kanban</field>
            <field name="model">sale.order.service.generator</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="service"/>
                    <field name="producto"/>
                    <field name="cliente"/>
                    <field name="horas"/>
                    <field name="state"/>
                    <field name="fixed_lunes"/>
                    <field name="fixed_martes"/>
                    <field name="fixed_miercoles"/>
                    <field name="fixed_jueves"/>
                    <field name="fixed_viernes"/>
                    <field name="fixed_sabado"/>
                    <field name="fixed_domingo"/>
                    <field name="fixed_todos"/>
                    <field name="could_be_renewed"/>
                    <field name="half_done"/>
                    <field name="days_till_renovation"/>
                    <field name="completition"/>
                <field name="is_favorite"/>
                    <field readonly="1" invisible="1" name="company_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_record_top mb16">

                                <span style="float:left;" class="o_left">
                                    <field name="is_favorite" widget="boolean_favorite" nolabel="1"
                                           force_save="1"/>
                                </span>
                                    <div class="o_kanban_record_headings mt4">
                                        <strong class="o_kanban_record_title">
                                            <field name="name"/>
                                        </strong>
                                    </div>
                                    <strong>
                                        <field name="service" widget="label_selection" options="{'classes': {'ya': 'warning', 'fijo': 'primary', 'planificado': 'info'}}"/>
                                        <field name="state" widget="label_selection"
                                               options="{'classes': {'draft': 'default', 'cancelado': 'danger', 'generado': 'success', 'confirmado': 'info', 'completado': 'info'}}"/>
                                    </strong>
                                </div>
                                <div class="o_kanban_record_bottom anonbussinessKanbanPercent" style="display:block;">
                                    <div class="text-muted row">
                                        <strong class="col-xs-4">
                                            <field name="horas" widget="float_time"/>
                                            Horas
                                            <t t-if="record.could_be_renewed">
                                                <p><field name="days_till_renovation"/> Dias para renovar</p>
                                            </t>
                                        </strong>
                                        <strong class="col-xs-4">
                                            <field name="producto"/>
                                        </strong>
                                        <strong class="col-xs-4">
                                            <field name="cliente"/>
                                        </strong>
                                    </div>

                                    <div>

                                    <field name="completition" string="Completados" widget="percentpie"/>
                                    <button  class="btn btn-sm btn-danger" style="float:right;" name="renew" type="object" attrs="{'invisible': [('could_be_renewed', '!=', True)]}">
                                        <i class="fa fa-refresh"/> Renovar
                                    </button>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>



        <!--></OTHER><-->



        <!--><ACTIONS><-->

        <record id="action_sale_order_service_generator" model="ir.actions.act_window">
            <field name="name">Servicios</field>
            <field name="res_model">sale.order.service.generator</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="sale_order_service_generator_tree"/>
            <field name="search_view_id" ref="anonbussiness_service_generator.view_service_generator_filter_driver" />
            <field name="context">{'search_default_view_own': True, 'search_default_view_non_canceled': True}</field>
        </record>
        <record id="action_sale_order_service_generator_fav" model="ir.actions.act_window">
            <field name="name">Servicios Favoritos</field>
            <field name="res_model">sale.order.service.generator</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="sale_order_service_generator_tree"/>
            <field name="search_view_id" ref="anonbussiness_service_generator.view_service_generator_filter_driver" />
            <field name="context">{'search_default_view_favorites': True}</field>
        </record>
<record id="button_click_action_renew" model="ir.actions.server">
    <field name="name">Renovar</field>
    <field name="binding_model_id" ref="anonbussiness_service_generator.model_sale_order_service_generator" />
    <field name="model_id" ref="anonbussiness_service_generator.model_sale_order_service_generator"/>
    <field name="state">code</field>
    <field name="code">action = records.filtered('could_be_renewed').renew()</field>
</record>
        <!--></ACTIONS><-->




    </data>
</odoo>